<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <meta name="description" content="ScholarMatch scholarship search engine. Browse, filter, and compare scholarships easily." />
  <meta name="keywords" content="scholarship finder, scholarship search, filters, funding" />
  <title>ScholarMatch ‚Äî Scholarship Search Engine</title>

  <!-- Preconnect for performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <!-- FIXED: stylesheet path (your repo has styles.css in root, not css/styles.css) -->
  <link rel="stylesheet" href="./styles.css" />

  <!-- Page-specific, minimal CSS to match your layout/colors -->
  <style>
    :root{
  --primary: #2563EB;
  --primary-700: #1D4ED8;
  --primary-50: #EFF6FF;
  --blue-surface: #F3F7FF;
  --neutral-900:#0F172A;
  --neutral-700:#334155;
  --neutral-500:#64748B;
  --neutral-200:#E2E8F0;
  --neutral-100:#F1F5F9;
  --white:#ffffff;
  --radius: 16px;
  --shadow-soft: 0 6px 20px rgba(15,23,42,0.06);
  --font: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
}

body{
  font-family: var(--font);
  color: var(--neutral-900);
  background: var(--blue-surface); /* adds a subtle blue page background */
}

.container{max-width: 1100px; margin: 0 auto; padding: 0 20px;}

/* ===== HEADER (resized + cleaner, like screenshot) ===== */
.header{
  position: sticky;
  top: 0;
  background: rgba(255,255,255,0.92);
  backdrop-filter: blur(10px);
  border-bottom: 2px solid rgba(37,99,235,0.18);
  z-index: 50;
}

.header-content{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 18px;
  padding: 12px 0; /* slightly smaller header */
}

.logo{display:flex; align-items:center; gap: 10px; text-decoration:none;}
.logo-icon{width:40px; height:40px;}   /* slightly bigger logo like screenshot */
.logo-text{
  font-size: 20px;
  margin:0;
  color: var(--primary);
  font-weight: 800;
  letter-spacing: .2px;
}

/* Nav: more compact and evenly spaced; wraps nicely on smaller screens */
.nav-list{
  display:flex;
  gap: 10px;
  list-style:none;
  margin:0;
  padding:0;
  flex-wrap: wrap;          /* allows wrap like screenshot if needed */
  justify-content:flex-end; /* keeps items to the right */
}

.nav-link{
  display:inline-block;
  text-decoration:none;
  color: var(--neutral-700);
  font-weight: 600;
  font-size: 13px;          /* smaller so it fits */
  line-height: 1.15;
  text-align:center;
  padding: 8px 10px;        /* makes each item ‚Äútile-like‚Äù but compact */
  border-radius: 12px;
  transition: background .15s ease, color .15s ease, border-color .15s ease;
  border: 1px solid transparent;
  white-space: normal;
}

.nav-link:hover{
  color: var(--primary-700);
  background: var(--primary-50);
  border-color: rgba(37,99,235,0.18);
}

/* ===== HERO (more blue + livelier) ===== */
.hero{
  padding: 58px 0;
  background: linear-gradient(180deg, var(--primary-700) 0%, var(--primary) 55%, #3B82F6 100%);
  color: #fff;
}

.hero-content{max-width: 760px;}
.hero-title{font-size: 40px; line-height:1.1; margin:0 0 12px;}
.hero-subtitle{color: rgba(255,255,255,0.90); font-size: 16px; margin:0 0 22px;}

.cta-button, .secondary-button{
  display:inline-flex; align-items:center; justify-content:center;
  padding: 12px 16px; border-radius: 12px; font-weight: 700; text-decoration:none;
  border: 1px solid transparent;
}
.cta-button{
  background: #ffffff;
  color: var(--primary-700);
  box-shadow: 0 10px 28px rgba(0,0,0,0.18);
}
.cta-button:hover{filter: brightness(0.97);}

.secondary-button{
  background: rgba(255,255,255,0.14);
  border-color: rgba(255,255,255,0.28);
  color: #fff;
}
.secondary-button:hover{background: rgba(255,255,255,0.20);}

/* ===== SECTIONS: add subtle blue separation ===== */
.section{padding: 34px 0 56px;}
.section:nth-of-type(even){
  background: #ffffff; /* alternates white/blue surface for readability */
}
.section-title{font-size: 26px; margin:0 0 8px;}
.section-subtitle{margin:0 0 18px; color: var(--neutral-500);}

/* Cards pop more on blue background */
.card{
  background: var(--white);
  border: 1px solid var(--neutral-200);
  border-radius: var(--radius);
  box-shadow: var(--shadow-soft);
}

  </style>
</head>

<body>
  <!-- Header -->
  <!-- Header (UPDATED NAVBAR) -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ScholarMatch - An AI-powered scholarship finder that helps students discover scholarships they qualify for.">
    <meta name="keywords" content="scholarships, student funding, AI, financial aid">
    <meta name="author" content="ScholarMatch Team">
    <meta name="theme-color" content="#2563EB">
    
    <title>ScholarMatch</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75' fill='%232563EB'>üéì</text></svg>">
</head>
<body>
    <header class="header" role="banner">
    <div class="container">
        <div class="header-content">
            <a href="https://raelyn23050595.github.io/ScholarMatch/" class="logo">
                <img src="images/logo.png" alt="ScholarMatch Logo" class="logo-icon">
                <h1 class="logo-text">ScholarMatch</h1>
            </a>
            <nav class="nav" role="navigation" aria-label="Main navigation">
                <ul class="nav-list">
                    <li><a href="https://23018472-tunaungmyin.github.io/C240_AungMyin/" class="nav-link">Search Scholarships<br>(Aung Myin)</a></li>
                    <li><a href="https://raelyn23050595.github.io/ScholarMatch_Raelyn/" class="nav-link">Scholarship Comparison<br>(Raelyn)</a></li>
                    <li><a href="https://tohwangxin.github.io/C240_FA/" class="nav-link">Scholarship Application Guidance<br>(WangXin)</a></li>
                    <li><a href="https://scholarmatch-a13r.onrender.com/" class="nav-link">Scholarship Eligibility Guidance <br>(Ee Weng)</a></li>
                    <li><a href="https://23026439-ralph.github.io/C240-FA/" class="nav-link">Scholarship Fraud Detetction (Ralph)</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>


  <!-- Main Content -->
  <main id="main-content" role="main">
    <!-- Hero -->
    <section class="hero" id="home">
      <div class="container">
        <div class="hero-content">
          <h2 class="hero-title">Search Scholarships in One Place</h2>
          <p class="hero-subtitle">
            Browse scholarships by field and eligibility. Use filters to narrow down
            to what matters most‚Äîfast.
          </p>
          <div class="cta-row">
            <a href="#search" class="cta-button">Start Searching</a>
            <a href="#featured" class="secondary-button">View Featured Scholarships</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Search Section -->
    <section class="section" id="search">
      <div class="container">
        <h2 class="section-title">Scholarship Search Engine</h2>
        <p class="section-subtitle">Use the filters to narrow results. Click ‚ÄúView Details‚Äù for full information.</p>

        <div class="search-grid">
          <!-- Filters -->
          <aside class="card" aria-label="Scholarship filters">
            <div class="filters-header">
              <h3>Filters</h3>
              <span class="pill" id="activeFilterCount">0 active</span>
            </div>

            <div class="card-pad">
              <div class="form-group">
                <label for="q" class="form-label">Keyword</label>
                <input id="q" class="form-input" type="text" placeholder="e.g., merit, global, leadership" />
                <span class="help-text">Search by scholarship name, provider, or description keywords.</span>
              </div>

              <!-- REMOVED: Study Level -->

              <div class="row">
                <div class="form-group">
                  <label for="field" class="form-label">Field</label>
                  <select id="field" class="form-select">
                    <option value="">All</option>
                    <option value="Any">Any</option>
                    <option value="Sports">Sports</option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="citizenship" class="form-label">Eligibility</label>
                  <select id="citizenship" class="form-select">
                    <option value="">All</option>
                    <option value="Singapore Citizen">Singapore Citizen</option>
                    <option value="Singapore PR">Singapore PR</option>
                    <option value="International">International</option>
                  </select>
                </div>
              </div>

              <div class="form-group">
                <label for="type" class="form-label">Type</label>
                <select id="type" class="form-select">
                  <option value="">All</option>
                  <option value="Merit">Merit</option>
                  <option value="Sports">Sports</option>
                </select>
              </div>

              <!-- Kept Min Award input for UI consistency, but these scholarships have benefits that vary by programme.
                   If you want, tell me and I will remove this too. -->
              <div class="form-group">
                <label for="minAward" class="form-label">Min Award (SGD)</label>
                <input id="minAward" class="form-input" type="number" min="0" step="500" placeholder="Optional (may not apply for all)" />
                <span class="help-text">Many university scholarships cover tuition/allowances; refer to official pages for exact benefits.</span>
              </div>

              <!-- REMOVED: Application Deadline filter -->

              <div class="form-group">
                <label for="sort" class="form-label">Sort by</label>
                <select id="sort" class="form-select">
                  <option value="relevance">Relevance</option>
                  <option value="title_asc">Title (A‚ÄìZ)</option>
                  <option value="award_desc">Award (Highest)</option>
                </select>
              </div>

              <div class="row">
                <button class="btn btn-primary" id="applyBtn" type="button">Apply Filters</button>
                <button class="btn btn-ghost" id="resetBtn" type="button">Reset</button>
              </div>

              <span class="help-text" style="margin-top:10px;">
                Tip: Use ‚ÄúKeyword‚Äù (e.g., ‚ÄúGlobal‚Äù, ‚ÄúMerit‚Äù, ‚ÄúScholars‚Äù) to narrow quickly.
              </span>
            </div>
          </aside>

          <!-- Results -->
          <section class="card" aria-label="Scholarship results">
            <div class="results-header">
              <div class="results-meta">
                <div class="results-count" id="resultsCount">0 scholarships</div>
                <p class="results-hint" id="resultsHint">Use filters on the left to refine results.</p>
              </div>
              <div class="chips" id="activeChips" aria-label="Active filters"></div>
            </div>

            <div class="list" id="resultsList">
              <!-- dynamically inserted -->
            </div>
          </section>
        </div>
      </div>
    </section>

    <!-- Featured Section -->
    <section class="section" id="featured">
      <div class="container">
        <h2 class="section-title">Featured Scholarships</h2>
        <p class="section-subtitle">A curated set based on the scholarships you listed.</p>

        <div class="card">
          <div class="list" id="featuredList"></div>
        </div>
      </div>
    </section>

    <!-- Tips -->
    <section class="section" id="tips">
      <div class="container">
        <h2 class="section-title">Quick Tips</h2>
        <p class="section-subtitle">Small improvements that increase your chances.</p>

        <div class="card">
          <div class="card-pad" style="display:grid; gap:12px;">
            <div class="sch-card">
              <h3 class="sch-title">Apply early</h3>
              <p class="sch-body">University scholarships can have specific windows. Submit applications as soon as your admission application allows.</p>
            </div>
            <div class="sch-card">
              <h3 class="sch-title">Show leadership and impact</h3>
              <p class="sch-body">Use specific outcomes (metrics, roles, competitions, service) to demonstrate your contributions.</p>
            </div>
            <div class="sch-card">
              <h3 class="sch-title">Prepare referees</h3>
              <p class="sch-body">Give referees your CV and a shortlist of achievements so they can write stronger recommendations.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer" role="contentinfo">
    <div class="container">
      <p class="footer-text">&copy; 2026 ScholarMatch. Scholarship Search Engine.</p>
    </div>
  </footer>

  <!-- Details Modal -->
  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div>
          <h3 class="modal-title" id="modalTitle">Scholarship Title</h3>
          <p class="modal-sub" id="modalSub">Provider ‚Ä¢ Field</p>
        </div>
        <button class="icon-btn" id="closeModalBtn" aria-label="Close details">‚úï</button>
      </div>

      <div class="modal-body" id="modalBody">
        <!-- inserted -->
      </div>

      <div class="modal-foot">
        <a class="link-btn" id="modalLink" href="#" target="_blank" rel="noopener">Open Official Page</a>
        <button class="link-btn primary" id="copyBtn" type="button">Copy Summary</button>
      </div>
    </div>
  </div>

  <!-- JavaScript (inline for simplicity) -->
  <script>
    const SCHOLARSHIPS = [
      // =========================
      // NUS
      // =========================
      {
        id: "nus-gms",
        title: "NUS Global Merit Scholarship",
        provider: "National University of Singapore (NUS)",
        field: "Any",
        type: "Merit",
        eligibility: ["Singapore Citizen"],
        award: 0,
        description: "NUS entrance scholarship for outstanding freshmen; benefits vary by programme and official terms.",
        requirements: ["Admission application", "Scholarship application", "Interview (if shortlisted)"],
        link: "https://www.nus.edu.sg/oam/scholarships/scholarships-for-freshmen-singapore-citizens/nus-global-merit-scholarship"
      },
      {
        id: "nus-ms",
        title: "NUS Merit Scholarship",
        provider: "National University of Singapore (NUS)",
        field: "Any",
        type: "Merit",
        eligibility: ["Singapore Citizen"],
        award: 0,
        description: "NUS entrance scholarship recognising academic excellence, leadership, and strong co-curricular record.",
        requirements: ["Admission application", "Scholarship application", "Interview (if shortlisted)"],
        link: "https://nus.edu.sg/oam/scholarships/scholarships-for-freshmen-singapore-citizens/nus-merit-scholarship"
      },
      {
        id: "nus-us",
        title: "NUS Undergraduate Scholarship",
        provider: "National University of Singapore (NUS)",
        field: "Any",
        type: "Merit",
        eligibility: ["Singapore Citizen"],
        award: 0,
        description: "NUS entrance scholarship for high-calibre freshmen; benefits and conditions are detailed on the official page.",
        requirements: ["Admission application", "Scholarship application", "Interview (if shortlisted)"],
        link: "https://www.nus.edu.sg/oam/scholarships/scholarships-for-freshmen-singapore-citizens/nus-undergraduate-scholarship"
      },

      // =========================
      // NTU
      // =========================
      {
        id: "ntu-nms",
        title: "Nanyang Merit Scholarship",
        provider: "Nanyang Technological University (NTU)",
        field: "Any",
        type: "Merit",
        eligibility: ["Singapore Citizen", "Singapore PR", "International"],
        award: 0,
        description: "NTU scholarship for outstanding freshmen; typically includes tuition and allowances subject to terms.",
        requirements: ["Admission application", "Scholarship application", "Interview (if shortlisted)"],
        link: "https://www.ntu.edu.sg/admissions/undergraduate/scholarships/scholarship/Nanyang_Merit_Scholarship"
      },
      {
        id: "ntu-ngs",
        title: "Nanyang Global Scholarship",
        provider: "Nanyang Technological University (NTU)",
        field: "Any",
        type: "Merit",
        eligibility: ["Singapore Citizen", "Singapore PR", "International"],
        award: 0,
        description: "NTU scholarship recognising students with outstanding academic results and strong leadership qualities.",
        requirements: ["Admission application", "Scholarship application", "Interview (if shortlisted)"],
        link: "https://www.ntu.edu.sg/admissions/undergraduate/scholarships/scholarship-listings/detail/nanyang-scholarship"
      },
      {
        id: "ntu-ewb",
        title: "E. W. Barker Scholarship",
        provider: "Nanyang Technological University (NTU)",
        field: "Sports",
        type: "Sports",
        eligibility: ["Singapore Citizen", "Singapore PR", "International"],
        award: 0,
        description: "Scholarship supporting undergraduates in sport-related programmes (e.g., Sport Science & Management), subject to official eligibility and terms.",
        requirements: ["Programme-specific eligibility", "Scholarship application", "Interview (if shortlisted)"],
        link: "https://www.ntu.edu.sg/admissions/undergraduate/scholarships/ewbarkerscholarship"
      },

      // =========================
      // SMU
      // =========================
      {
        id: "smu-merit",
        title: "SMU Merit Scholarship Programme",
        provider: "Singapore Management University (SMU)",
        field: "Any",
        type: "Merit",
        eligibility: ["Singapore Citizen", "Singapore PR", "International"],
        award: 0,
        description: "SMU scholarship programme offering a tuition fee waiver and development opportunities, subject to terms.",
        requirements: ["Admission application", "Scholarship consideration/application", "Interview (if shortlisted)"],
        link: "https://admissions.smu.edu.sg/financial-matters/financial-aid/smu-merit-scholarship-programme"
      },
      {
        id: "smu-ypx",
        title: "Yip Pin Xiu Scholarship",
        provider: "Singapore Management University (SMU)",
        field: "Sports",
        type: "Sports",
        eligibility: ["Singapore Citizen"],
        award: 0,
        description: "SMU scholarship recognising outstanding athletes with strong leadership potential, subject to official criteria.",
        requirements: ["Admission application", "Scholarship application/consideration", "Sports achievements documentation"],
        link: "https://admissions.smu.edu.sg/financial-matters/financial-aid/yip-pin-xiu-scholarship"
      },
      {
        id: "smu-lkcsp",
        title: "Lee Kong Chian Scholars' Programme",
        provider: "Singapore Management University (SMU)",
        field: "Any",
        type: "Merit",
        eligibility: ["Singapore Citizen", "Singapore PR", "International"],
        award: 0,
        description: "One of SMU‚Äôs most prestigious scholarships; benefits include tuition waiver and enrichment opportunities.",
        requirements: ["Admission application", "Scholarship application/consideration", "Interview (if shortlisted)"],
        link: "https://admissions.smu.edu.sg/financial-matters/financial-aid/lee-kong-chian-scholars-programme"
      }
    ];

    const $ = (id) => document.getElementById(id);

    function formatMoney(n){
      if (!n || Number(n) === 0) return "See official page";
      try { return new Intl.NumberFormat("en-SG", { style:"currency", currency:"SGD", maximumFractionDigits:0 }).format(n); }
      catch { return "SGD " + n; }
    }

    function buildActiveChips(filters){
      const chips = [];
      if (filters.q) chips.push({ key:"q", label: `Keyword: ${filters.q}` });
      if (filters.field) chips.push({ key:"field", label: `Field: ${filters.field}` });
      if (filters.citizenship) chips.push({ key:"citizenship", label: `Eligibility: ${filters.citizenship}` });
      if (filters.type) chips.push({ key:"type", label: `Type: ${filters.type}` });
      if (filters.minAward) chips.push({ key:"minAward", label: `Min Award: ${formatMoney(filters.minAward)}` });
      return chips;
    }

    function computeRelevanceScore(s, q){
      if (!q) return 0;
      const hay = (s.title + " " + s.provider + " " + s.description).toLowerCase();
      const terms = q.toLowerCase().split(/\s+/).filter(Boolean);
      let score = 0;
      for (const t of terms){
        if (s.title.toLowerCase().includes(t)) score += 3;
        if (s.provider.toLowerCase().includes(t)) score += 2;
        if (hay.includes(t)) score += 1;
      }
      return score;
    }

    function applyFilters(){
      const filters = {
        q: $("q").value.trim(),
        field: $("field").value,
        citizenship: $("citizenship").value,
        type: $("type").value,
        minAward: Number($("minAward").value || 0),
        sort: $("sort").value
      };

      const activeCount =
        (filters.q ? 1 : 0) +
        (filters.field ? 1 : 0) +
        (filters.citizenship ? 1 : 0) +
        (filters.type ? 1 : 0) +
        (filters.minAward ? 1 : 0);

      $("activeFilterCount").textContent = `${activeCount} active`;

      const chips = buildActiveChips(filters);
      const chipWrap = $("activeChips");
      chipWrap.innerHTML = "";
      chips.forEach(c => {
        const el = document.createElement("span");
        el.className = "chip";
        el.textContent = c.label;
        chipWrap.appendChild(el);
      });

      let out = SCHOLARSHIPS.slice();

      if (filters.q){
        const q = filters.q.toLowerCase();
        out = out.filter(s =>
          (s.title + " " + s.provider + " " + s.description).toLowerCase().includes(q)
        );
      }
      if (filters.field) out = out.filter(s => s.field === filters.field);
      if (filters.type) out = out.filter(s => s.type === filters.type);
      if (filters.citizenship) out = out.filter(s => s.eligibility.includes(filters.citizenship));

      // Optional: numeric award filter (note: these scholarships often have non-numeric benefits)
      if (filters.minAward) out = out.filter(s => (Number(s.award) || 0) >= filters.minAward);

      if (filters.sort === "title_asc"){
        out.sort((a,b) => a.title.localeCompare(b.title));
      } else if (filters.sort === "award_desc"){
        out.sort((a,b) => (Number(b.award)||0) - (Number(a.award)||0));
      } else {
        out.sort((a,b) => computeRelevanceScore(b, filters.q) - computeRelevanceScore(a, filters.q));
      }

      renderResults(out);
    }

    function renderResults(list){
      $("resultsCount").textContent = `${list.length} scholarships`;
      $("resultsHint").textContent = list.length
        ? "Showing matches based on your filters."
        : "No matches found. Try removing some filters or broadening your keyword.";

      const root = $("resultsList");
      root.innerHTML = "";

      list.forEach(s => {
        const el = document.createElement("article");
        el.className = "sch-card";

        el.innerHTML = `
          <div class="sch-top">
            <div>
              <h3 class="sch-title">${escapeHtml(s.title)}</h3>
              <p class="sch-provider">${escapeHtml(s.provider)} ‚Ä¢ ${escapeHtml(s.field)}</p>
            </div>
            <span class="badge">${escapeHtml(s.type)}</span>
          </div>

          <p class="sch-body">${escapeHtml(s.description)}</p>

          <div class="sch-tags" aria-label="Scholarship tags">
            <span class="tag">Type: ${escapeHtml(s.type)}</span>
            <span class="tag">Field: ${escapeHtml(s.field)}</span>
            <span class="tag">Award: ${escapeHtml(formatMoney(s.award))}</span>
          </div>

          <div class="sch-actions">
            <button class="link-btn" type="button" data-action="details" data-id="${escapeHtml(s.id)}">View Details</button>
            <a class="link-btn primary" href="${escapeAttr(s.link)}" target="_blank" rel="noopener">Official Page</a>
          </div>
        `;

        root.appendChild(el);
      });

      root.querySelectorAll('[data-action="details"]').forEach(btn => {
        btn.addEventListener("click", () => openModal(btn.dataset.id));
      });
    }

    function renderFeatured(){
      // Curate featured as a mix across universities (top 3 by prestige keywords / not by award)
      const featuredIds = ["nus-gms", "ntu-ngs", "smu-lkcsp"];
      const featured = featuredIds.map(id => SCHOLARSHIPS.find(s => s.id === id)).filter(Boolean);

      const root = $("featuredList");
      root.innerHTML = "";

      featured.forEach(s => {
        const el = document.createElement("article");
        el.className = "sch-card";
        el.innerHTML = `
          <div class="sch-top">
            <div>
              <h3 class="sch-title">${escapeHtml(s.title)}</h3>
              <p class="sch-provider">${escapeHtml(s.provider)} ‚Ä¢ ${escapeHtml(s.field)}</p>
            </div>
            <span class="badge">${escapeHtml(s.type)}</span>
          </div>
          <p class="sch-body">${escapeHtml(s.description)}</p>
          <div class="sch-actions">
            <button class="link-btn" type="button" data-action="details" data-id="${escapeHtml(s.id)}">View Details</button>
            <a class="link-btn primary" href="${escapeAttr(s.link)}" target="_blank" rel="noopener">Official Page</a>
          </div>
        `;
        root.appendChild(el);
      });

      root.querySelectorAll('[data-action="details"]').forEach(btn => {
        btn.addEventListener("click", () => openModal(btn.dataset.id));
      });
    }

    function openModal(id){
      const s = SCHOLARSHIPS.find(x => x.id === id);
      if (!s) return;

      $("modalTitle").textContent = s.title;
      $("modalSub").textContent = `${s.provider} ‚Ä¢ ${s.field}`;
      $("modalLink").href = s.link;

      $("modalBody").innerHTML = `
        <p style="margin-top:0;">${escapeHtml(s.description)}</p>

        <div class="modal-grid">
          <div class="kv">
            <div class="k">Type</div>
            <div class="v">${escapeHtml(s.type)}</div>
          </div>
          <div class="kv">
            <div class="k">Field</div>
            <div class="v">${escapeHtml(s.field)}</div>
          </div>
          <div class="kv">
            <div class="k">Eligible Applicants</div>
            <div class="v">${escapeHtml(s.eligibility.join(", "))}</div>
          </div>
          <div class="kv">
            <div class="k">Award / Benefits</div>
            <div class="v">${escapeHtml(formatMoney(s.award))}</div>
          </div>
        </div>

        <div style="margin-top:14px;">
          <div class="k" style="margin-bottom:8px;">Typical Requirements</div>
          <ul style="margin:0; padding-left:18px; color: var(--neutral-700);">
            ${s.requirements.map(r => `<li>${escapeHtml(r)}</li>`).join("")}
          </ul>
        </div>
      `;

      const summary = [
        `Scholarship: ${s.title}`,
        `Provider: ${s.provider}`,
        `Field: ${s.field}`,
        `Type: ${s.type}`,
        `Eligibility: ${s.eligibility.join(", ")}`,
        `Requirements: ${s.requirements.join("; ")}`,
        `Official link: ${s.link}`
      ].join("\n");

      $("copyBtn").onclick = async () => {
        try{
          await navigator.clipboard.writeText(summary);
          $("copyBtn").textContent = "Copied";
          setTimeout(() => $("copyBtn").textContent = "Copy Summary", 1200);
        } catch {
          alert("Copy failed. Your browser may block clipboard access.");
        }
      };

      const backdrop = $("modalBackdrop");
      backdrop.style.display = "flex";
      backdrop.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }

    function closeModal(){
      const backdrop = $("modalBackdrop");
      backdrop.style.display = "none";
      backdrop.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }
    function escapeAttr(str){
      return escapeHtml(str).replaceAll("`","&#096;");
    }

    $("applyBtn").addEventListener("click", applyFilters);
    $("resetBtn").addEventListener("click", () => {
      $("q").value = "";
      $("field").value = "";
      $("citizenship").value = "";
      $("type").value = "";
      $("minAward").value = "";
      $("sort").value = "relevance";
      applyFilters();
    });

    $("q").addEventListener("keydown", (e) => {
      if (e.key === "Enter"){ e.preventDefault(); applyFilters(); }
    });

    $("closeModalBtn").addEventListener("click", closeModal);
    $("modalBackdrop").addEventListener("click", (e) => {
      if (e.target === $("modalBackdrop")) closeModal();
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeModal();
    });

    renderFeatured();
    renderResults(SCHOLARSHIPS.slice());
    applyFilters();
  </script>

  <script type="module">
    import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js"
    Chatbot.init({
      chatflowid: "6a5712e1-6ff9-48e7-baee-c7b9c64866b4",
      apiHost: "https://flowise-production-ad0b.up.railway.app",
      theme: {
        button: {
          backgroundColor: "#2563EB",
          right: 20,
          bottom: 20,
          size: "medium",
          iconColor: "white",
          customIconSrc: "https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/svg/google-messages.svg",
        },
        chatWindow: {
          welcomeMessage: "Hi! üëã I'm your AI Scholarship Assistant. Ask me anything about scholarships, eligibility, or how to apply.",
          backgroundColor: "#ffffff",
          height: 600,
          width: 400,
          fontSize: 16,
          poweredByTextColor: "#64748B",
          botMessage: {
            backgroundColor: "#F1F5F9",
            textColor: "#1E293B",
            showAvatar: true,
            avatarSrc: "https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/parroticon.png",
          },
          userMessage: {
            backgroundColor: "#2563EB",
            textColor: "#ffffff",
            showAvatar: true,
            avatarSrc: "https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/usericon.png",
          },
          textInput: {
            placeholder: "Ask about scholarships...",
            backgroundColor: "#ffffff",
            textColor: "#1E293B",
            sendButtonColor: "#2563EB",
          }
        }
      }
    })
  </script>
</body>
</html>



